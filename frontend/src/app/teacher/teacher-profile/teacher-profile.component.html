<div class="min-h-screen bg-gray-50">
  <!-- Navigation mobile -->
  <app-teacher-mobile-nav></app-teacher-mobile-nav>

  <!-- En-tête -->
  <div class="bg-white shadow">
    <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between">
        <div>
          <h1 class="text-3xl font-bold text-gray-900">Mon Profil</h1>
          <p class="mt-2 text-gray-600">Gérez vos informations personnelles</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Contenu principal -->
  <div class="max-w-4xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Informations du profil -->
      <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
          <h3 class="text-lg leading-6 font-medium text-gray-900 mb-6">
            Informations personnelles
          </h3>

          <form [formGroup]="profileForm" (ngSubmit)="onSubmitProfile()">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Prénom -->
              <div>
                <label for="firstName" class="block text-sm font-medium text-gray-700 mb-2">
                  Prénom *
                </label>
                <input
                  type="text"
                  id="firstName"
                  formControlName="firstName"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  [class.border-red-500]="profileForm.get('firstName')?.invalid && profileForm.get('firstName')?.touched"
                >
                <div *ngIf="profileForm.get('firstName')?.invalid && profileForm.get('firstName')?.touched" class="mt-1 text-sm text-red-600">
                  {{ getProfileErrorMessage('firstName') }}
                </div>
              </div>

              <!-- Nom -->
              <div>
                <label for="lastName" class="block text-sm font-medium text-gray-700 mb-2">
                  Nom *
                </label>
                <input
                  type="text"
                  id="lastName"
                  formControlName="lastName"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  [class.border-red-500]="profileForm.get('lastName')?.invalid && profileForm.get('lastName')?.touched"
                >
                <div *ngIf="profileForm.get('lastName')?.invalid && profileForm.get('lastName')?.touched" class="mt-1 text-sm text-red-600">
                  {{ getProfileErrorMessage('lastName') }}
                </div>
              </div>

              <!-- Email -->
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                  Email *
                </label>
                <input
                  type="email"
                  id="email"
                  formControlName="email"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  [class.border-red-500]="profileForm.get('email')?.invalid && profileForm.get('email')?.touched"
                >
                <div *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched" class="mt-1 text-sm text-red-600">
                  {{ getProfileErrorMessage('email') }}
                </div>
              </div>

              <!-- Téléphone -->
              <div>
                <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                  Téléphone
                </label>
                <input
                  type="tel"
                  id="phone"
                  formControlName="phone"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                >
              </div>

              <!-- Département -->
              <div>
                <label for="departement" class="block text-sm font-medium text-gray-700 mb-2">
                  Département *
                </label>
                <select
                  id="departement"
                  formControlName="departement"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  [class.border-red-500]="profileForm.get('departement')?.invalid && profileForm.get('departement')?.touched"
                >
                  <option value="">Sélectionner un département</option>
                  <option value="Informatique">Informatique</option>
                  <option value="Mathématiques">Mathématiques</option>
                  <option value="Physique">Physique</option>
                  <option value="Chimie">Chimie</option>
                  <option value="Biologie">Biologie</option>
                </select>
                <div *ngIf="profileForm.get('departement')?.invalid && profileForm.get('departement')?.touched" class="mt-1 text-sm text-red-600">
                  {{ getProfileErrorMessage('departement') }}
                </div>
              </div>

              <!-- Grade -->
              <div>
                <label for="grade" class="block text-sm font-medium text-gray-700 mb-2">
                  Grade *
                </label>
                <select
                  id="grade"
                  formControlName="grade"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                  [class.border-red-500]="profileForm.get('grade')?.invalid && profileForm.get('grade')?.touched"
                >
                  <option value="">Sélectionner un grade</option>
                  <option value="Professeur">Professeur</option>
                  <option value="Maître de conférences">Maître de conférences</option>
                  <option value="Chargé de cours">Chargé de cours</option>
                  <option value="Assistant">Assistant</option>
                  <option value="Vacataire">Vacataire</option>
                </select>
                <div *ngIf="profileForm.get('grade')?.invalid && profileForm.get('grade')?.touched" class="mt-1 text-sm text-red-600">
                  {{ getProfileErrorMessage('grade') }}
                </div>
              </div>
            </div>

            <!-- Spécialité -->
            <div class="mt-6">
              <label for="speciality" class="block text-sm font-medium text-gray-700 mb-2">
                Spécialité
              </label>
              <input
                type="text"
                id="speciality"
                formControlName="speciality"
                placeholder="Ex: Intelligence Artificielle, Analyse Numérique..."
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              >
            </div>

            <!-- Bouton de soumission -->
            <div class="mt-8 flex justify-end">
              <button
                type="submit"
                [disabled]="profileForm.invalid || isLoading"
                class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span *ngIf="isLoading">Mise à jour...</span>
                <span *ngIf="!isLoading">Mettre à jour</span>
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Changement de mot de passe -->
      <div class="bg-white shadow rounded-lg">
        <div class="px-4 py-5 sm:p-6">
          <h3 class="text-lg leading-6 font-medium text-gray-900 mb-6">
            Changer le mot de passe
          </h3>

          <form [formGroup]="passwordForm" (ngSubmit)="onSubmitPassword()">
            <!-- Mot de passe actuel -->
            <div class="mb-6">
              <label for="currentPassword" class="block text-sm font-medium text-gray-700 mb-2">
                Mot de passe actuel *
              </label>
              <input
                type="password"
                id="currentPassword"
                formControlName="currentPassword"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                [class.border-red-500]="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched"
              >
              <div *ngIf="passwordForm.get('currentPassword')?.invalid && passwordForm.get('currentPassword')?.touched" class="mt-1 text-sm text-red-600">
                {{ getPasswordErrorMessage('currentPassword') }}
              </div>
            </div>

            <!-- Nouveau mot de passe -->
            <div class="mb-6">
              <label for="newPassword" class="block text-sm font-medium text-gray-700 mb-2">
                Nouveau mot de passe *
              </label>
              <input
                type="password"
                id="newPassword"
                formControlName="newPassword"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                [class.border-red-500]="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
              >
              <div *ngIf="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched" class="mt-1 text-sm text-red-600">
                {{ getPasswordErrorMessage('newPassword') }}
              </div>
            </div>

            <!-- Confirmation du mot de passe -->
            <div class="mb-6">
              <label for="confirmPassword" class="block text-sm font-medium text-gray-700 mb-2">
                Confirmer le nouveau mot de passe *
              </label>
              <input
                type="password"
                id="confirmPassword"
                formControlName="confirmPassword"
                class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
                [class.border-red-500]="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched"
              >
              <div *ngIf="passwordForm.get('confirmPassword')?.invalid && passwordForm.get('confirmPassword')?.touched" class="mt-1 text-sm text-red-600">
                {{ getPasswordErrorMessage('confirmPassword') }}
              </div>
            </div>

            <!-- Bouton de soumission -->
            <div class="flex justify-end">
              <button
                type="submit"
                [disabled]="passwordForm.invalid || isPasswordLoading"
                class="inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <span *ngIf="isPasswordLoading">Changement...</span>
                <span *ngIf="!isPasswordLoading">Changer le mot de passe</span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>